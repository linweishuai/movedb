<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
    <title>编辑规则</title>

    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript">
        $(document).ready( function(){

            $("#addExportBtn").click(function(){
                var alias =($("#ExportDb input[name=alias]").val());
                var host =($("#ExportDb input[name=host]").val());
                var username =($("#ExportDb input[name=username]").val());
                var passwd =($("#ExportDb input[name=passwd]").val());
                var dbname =($("#ExportDb input[name=dbname]").val());
                var tablename =($("#ExportDb input[name=tablename]").val());

                var ha="<tr class='afterAdd ExportDb'><td><span>";
                var hh ="</span></td><td><span>"; //id
                var hu="</span></td><td><span>";  //username
                var hp="</span></td><td><span>"; //password
                var hd="</span></td><td><span>";  //age
                var ht="</span></td><td><span>";
                var hr="<td><span><a href='javascript:void(0)' onclick='del(this)'>删除</a></td></tr>";
                $("#Export").after(ha+alias+hh+host+hu+username+hp+passwd+hd+dbname+ht+tablename+hr);
            });
            $("#addImportBtn").click(function(){
                var alias =($("#ImportDb input[name=alias]").val());
                var host =($("#ImportDb input[name=host]").val());
                var username =($("#ImportDb input[name=username]").val());
                var passwd =($("#ImportDb input[name=passwd]").val());
                var dbname =($("#ImportDb input[name=dbname]").val());
                var tablename =($("#ImportDb input[name=tablename]").val());

                var ha="<tr class='afterAdd ImportDb'><td><span>";
                var hh ="</span></td><td><span>"; //id
                var hu="</span></td><td><span>";  //username
                var hp="</span></td><td><span>"; //password
                var hd="</span></td><td><span>";  //age
                var ht="</span></td><td><span>";
                var hr="<td><span><a href='javascript:void(0)' onclick='del(this)'>删除</a></td></tr>";
                $("#Import").after(ha+alias+hh+host+hu+username+hp+passwd+hd+dbname+ht+tablename+hr);
            });
            $("#addFieldBtn").click(function(){
                var targetField =($("#Fieldrule input[name=targetField]").val());
                var sourceField =($("#Fieldrule input[name=sourceField]").val());
                var feildRule =($("#Fieldrule input[name=feildRule]").val());
                var extraData =($("#Fieldrule input[name=extraData]").val());
                var ht="<tr class='afterAdd FieldRule'><td><span>";
                var hs ="</span></td><td><span>"; //id
                var hf="</span></td><td><span>";  //username
                var he="</span></td><td><span>"; //password
                var hr="<td><span><a href='javascript:void(0)' onclick='del(this)'>删除</a></td></tr>";
                $("#Fieldrule").after(ht+targetField+hs+sourceField+hf+feildRule+he+extraData+hr);
            });
        });
        function makejson() {
            $json=[];
            //选取ExportDb的所有内容
            $(".ExportDb").each(function () {
                var exportdb=[];
                $(this).children('td').each(function(j){  // 遍历 tr 的各个 td
                    // if(!j){
                    //     //第一个作为数组的键值
                    //     exportdb[$(this).children('span').text()]
                    // }
                  });
                alert(exportdb)
            })











        }

        //删除一个
        function del(obj){
            $(obj).parent().parent().parent().remove();

        };
    </script>
</head>

<body>
<h2>ExportDb</h2>
<table border="1" width="800px" id="ExportDb">
    <tr id="Export">
        <th>alias</th>
        <th>host</th>
        <th>username</th>
        <th>passwd</th>
        <th>dbname</th>
        <th>tablename</th>
    </tr>
</table>
<hr/>
<form id="ExportDb">
    <table border="1" width="300px">
        <tr>
            <td>alias</td>
            <td><input type="text" name="alias" value=""/></td>
        </tr>
        <tr>
            <td>host</td>
            <td><input type="text" name="host" value=""/></td>
        </tr>
        <tr>
            <td>username</td>
            <td><input type="text" name="username" value=""/></td>
        </tr>
        <tr>
            <td>passwd</td>
            <td><input type="text" name="passwd" value=""/></td>
        </tr>
        <tr>
            <td>dbname</td>
            <td><input type="text" name="dbname" value=""/></td>
        </tr>
        <tr>
            <td>tablename</td>
            <td><input type="text" name="tablename" value=""/></td>
        </tr>
        <tr>
            <td colspan="2" align="center">
                <input type="button" value="添加" id="addExportBtn"/>
                <input type="reset" value="重置"/>
            </td>
        </tr>
    </table>
</form>
<h2>ImportDb</h2>
<table border="1" width="800px" id="ImportDb">
    <tr id="Import">
        <th>alias</th>
        <th>host</th>
        <th>username</th>
        <th>passwd</th>
        <th>dbname</th>
        <th>tablename</th>
    </tr>
</table>
<hr/>
<form id="ImportDb">
    <table border="1" width="300px">
        <tr>
            <td>alias</td>
            <td><input type="text" name="alias" value=""/></td>
        </tr>
        <tr>
            <td>host</td>
            <td><input type="text" name="host" value=""/></td>
        </tr>
        <tr>
            <td>username</td>
            <td><input type="text" name="username" value=""/></td>
        </tr>
        <tr>
            <td>passwd</td>
            <td><input type="text" name="passwd" value=""/></td>
        </tr>
        <tr>
            <td>dbname</td>
            <td><input type="text" name="dbname" value=""/></td>
        </tr>
        <tr>
            <td>tablename</td>
            <td><input type="text" name="tablename" value=""/></td>
        </tr>
        <tr>
            <td colspan="2" align="center">
                <input type="button" value="添加" id="addImportBtn"/>
                <input type="reset" value="重置"/>
            </td>
        </tr>
    </table>
</form>
<h2>Fieldrule</h2>
<table border="1" width="600px">
    <tr id="Fieldrule">
        <th>targetField</th>
        <th>sourceField</th>
        <th>feildRule</th>
        <th>extraData</th>
    </tr>

</table>
<hr/>
<form id="Fieldrule">
    <table border="1" width="300px">
        <tr>
            <td>targetField</td>
            <td><input type="text" name="targetField"/></td>
        </tr>
        <tr>
            <td>sourceField</td>
            <td><input type="text" name="sourceField"/></td>
        </tr>
        <tr>
            <td>feildRule</td>
            <td><input type="text" name="feildRule"/></td>
        </tr>
        <tr>
            <td>extraData</td>
            <td><input type="text" name="extraData"/></td>
        </tr>
        <tr>
            <td colspan="2" align="center">
                <input type="button" value="添加" id="addFieldBtn"/>
                <input type="reset" value="重置"/>
            </td>
        </tr>
    </table>
</form>
<input type="button" value="生成json" size="200" style="width: 600px; height: 50px;" onclick="makejson()">
</body>
</html>
